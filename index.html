<!DOCTYPE html>
<html>
  <head>
    <title>Find Nearest Hydrant - build 5</title>
    <script>
        window.closestHydrants = [];
        const hydrants = [
            {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.07417273521423, 46.21969275897951],
          },
          properties: {
            name: "196492",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "21 Hollis Avenue",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.07033181190491, 46.220635500929006],
          },
          properties: {
            name: "196493",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "Hollis Avenue",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.06708097457886, 46.219848646560614],
          },
          properties: {
            name: "196497",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "19 Dewar Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.06771397590637, 46.22123676883625],
          },
          properties: {
            name: "196499",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "31 Dewar Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.06071877479553, 46.21620373065015],
          },
          properties: {
            name: "196505",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "10971 Trans-Canada Highway",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.053659200668335, 46.21601071410114],
          },
          properties: {
            name: "196507",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "10788 Prince Edward Island 1",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.05145978927612, 46.216018137827106],
          },
          properties: {
            name: "196508",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "10788 Prince Edward Island 1",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.07808876037598, 46.21767360365214],
          },
          properties: {
            name: "196511",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.085861802101135, 46.238166066506544],
          },
          properties: {
            name: "196513",
            flow_rate: "1000-1499",
            hydrant_location: "91 Mason Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.08742284774778, 46.23778018714969],
          },
          properties: {
            name: "196514",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "88 Mason Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.08820605278015, 46.239375632290084],
          },
          properties: {
            name: "196515",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "74 Mason Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.08882296085358, 46.24054064897019],
          },
          properties: {
            name: "196516",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "66 Mason Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.08965444564819, 46.24207665226239],
          },
          properties: {
            name: "196518",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "60 Mason Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09167146682739, 46.24163143834254],
          },
          properties: {
            name: "196519",
            flow_rate: "1000-1499",
            hydrant_location: "35-39 East River Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09244394302366, 46.24035513841585],
          },
          properties: {
            name: "196521",
            flow_rate: "1000-1499",
            hydrant_location: "50 East River Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.093109130859375, 46.23904912636233],
          },
          properties: {
            name: "196523",
            flow_rate: "1000-1499",
            hydrant_location: "6 Macdonald Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.094611167907715, 46.23805475543212],
          },
          properties: {
            name: "196524",
            flow_rate: "1000-1499",
            hydrant_location: "24 Macdonald Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09398353099823, 46.23635166783659],
          },
          properties: {
            name: "196526",
            flow_rate: "1000-1499",
            hydrant_location: "38 Macdonald Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09244394302368, 46.237861815701486],
          },
          properties: {
            name: "196527",
            flow_rate: "1000-1499",
            hydrant_location: "74 East River Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09197187423706, 46.23673384677705],
          },
          properties: {
            name: "196528",
            flow_rate: "1000-1499",
            hydrant_location: "90 East River Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.08997631072998, 46.23762435048636],
          },
          properties: {
            name: "196532",
            flow_rate: "1000-1499",
            hydrant_location: "7 McCarron Way",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.088597655296326, 46.237104891745496],
          },
          properties: {
            name: "196541",
            flow_rate: "1000-1499",
            hydrant_location: "64 Starling Crescent",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.08994948863983, 46.239928461760584],
          },
          properties: {
            name: "196543",
            flow_rate: "1000-1499",
            hydrant_location: "18-20 Starling Crescent",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.089386224746704, 46.23882279724953],
          },
          properties: {
            name: "196545",
            flow_rate: "1000-1499",
            hydrant_location: "36 Starling Crescent",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.08265924453735, 46.21661203265289],
          },
          properties: {
            name: "196556",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "227 Stratford Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.08602809906006, 46.21654521980567],
          },
          properties: {
            name: "196557",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "5 Nottinghill Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.087862730026245, 46.21693124846776],
          },
          properties: {
            name: "196558",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "66-88 Kinlock Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09019088745117, 46.2169535192693],
          },
          properties: {
            name: "196559",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "194 Stratford Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.093130588531494, 46.21718365035647],
          },
          properties: {
            name: "196560",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "200 Stratford Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.101080656051636, 46.220152997229064],
          },
          properties: {
            name: "196561",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "7 John Hamilton Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09808731079104, 46.2205909623036],
          },
          properties: {
            name: "196562",
            flow_rate: "1000-1499",
            hydrant_location: "21 Reddin Heights",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.104074001312256, 46.22207556368175],
          },
          properties: {
            name: "196563",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "2-10 Quiet Water Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.10570478439331, 46.221800915453116],
          },
          properties: {
            name: "196564",
            flow_rate: "1000-1499",
            hydrant_location: "6 Quiet Water Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.10738921165466, 46.22445084238794],
          },
          properties: {
            name: "196565",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "13 Bayside Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.10523271560669, 46.22393868160752],
          },
          properties: {
            name: "196566",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "73 Stratford Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.101874589920044, 46.22230567330202],
          },
          properties: {
            name: "196567",
            flow_rate: "1000-1499",
            hydrant_location: "35 Barkley Avenue",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.10041546821594, 46.22500753346904],
          },
          properties: {
            name: "196568",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "20 Mutch Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.10471773147583, 46.22725650796424],
          },
          properties: {
            name: "196569",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "31 Harbourview Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.10252904891968, 46.2267814847232],
          },
          properties: {
            name: "196570",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "26-32 Stratford Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.1034517288208, 46.2270561080357],
          },
          properties: {
            name: "196571",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "32 Stratford Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.10424566268921, 46.22750886238907],
          },
          properties: {
            name: "196572",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "31 Harbourview Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.1039023399353, 46.22797645722747],
          },
          properties: {
            name: "196573",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "31 Harbourview Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.103591203689575, 46.22830302903789],
          },
          properties: {
            name: "196574",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "24 Stratford Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.099600076675415, 46.22822880834249],
          },
          properties: {
            name: "196575",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "1 Saint John Avenue",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09799075126648, 46.22560875349596],
          },
          properties: {
            name: "196576",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "29 Glen Stewart Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09595227241516, 46.224450842387945],
          },
          properties: {
            name: "196577",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "34 Glen Stewart Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.07714680113598, 46.21625802838575],
          },
          properties: {
            name: "536881083",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "273 Stratford Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.081586360931375, 46.22576462427993],
          },
          properties: {
            name: "536881091",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "Williams Gate",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.077616691589355, 46.218237786880145],
          },
          properties: {
            name: "536881099",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "264 Mason Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.0761843919754, 46.218742577486346],
          },
          properties: {
            name: "536881104",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "2 Hollis Avenue",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.07078778743744, 46.21736181569706],
          },
          properties: {
            name: "536881109",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "34 Myrtle Street",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.077841997146606, 46.23424035950942],
          },
          properties: {
            name: "536883430",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "105 Duffy Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.0799663066864, 46.235394353564004],
          },
          properties: {
            name: "536883459",
            flow_rate: "1000-1499",
            hydrant_location: "43 Harlandview Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.08366239070892, 46.236077091032364],
          },
          properties: {
            name: "536883464",
            flow_rate: "1000-1499",
            hydrant_location: "2-42 Harlandview Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.08476746082308, 46.236266326544595],
          },
          properties: {
            name: "536883564",
            flow_rate: "1000-1499",
            hydrant_location: "2-42 Harlandview Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.08667719364166, 46.23604369646247],
          },
          properties: {
            name: "536883581",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "61-99 Clifton Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.08871030807495, 46.23586559174649],
          },
          properties: {
            name: "536890130",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.0859100818634, 46.232169788447045],
          },
          properties: {
            name: "536890160",
            flow_rate: "1000-1499",
            hydrant_location: "14 Nightingale Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09106528759003, 46.23501216529459],
          },
          properties: {
            name: "536890186",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09305548667908, 46.23415872557045],
          },
          properties: {
            name: "536890197",
            flow_rate: "1000-1499",
            hydrant_location: "47-55 Macdonald Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09501886367798, 46.23283772313158],
          },
          properties: {
            name: "536890222",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09524416923523, 46.22816943171389],
          },
          properties: {
            name: "536890302",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "355 Shakespeare Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.11257585311978, 46.21772237609074],
          },
          properties: {
            name: "537373000",
            flow_rate: "1000-1499",
            hydrant_location: "39 Brandy Lane",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09580249795545, 46.23602759297833],
          },
          properties: {
            name: "537373003",
            flow_rate: "1000-1499",
            hydrant_location: "23 Carriage Lane",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.081463730413816, 46.21821098841667],
          },
          properties: {
            name: "537373004",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "133 Dale Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.08226410197678, 46.21858572168959],
          },
          properties: {
            name: "537373005",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "Liegard Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09101840262881, 46.22768506450808],
          },
          properties: {
            name: "537373006",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "8-12 Ducks Landing",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.079328155727126, 46.23709004999493],
          },
          properties: {
            name: "537373007",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "87 Duffy Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.07027102913321, 46.21613905641876],
          },
          properties: {
            name: "1073838677",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "32 Georgetown Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.08173656463623, 46.22312619581927],
          },
          properties: {
            name: "1073838678",
            flow_rate: "1000-1499",
            hydrant_location: "5 Williams Gate",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.08547556400299, 46.237275658254475],
          },
          properties: {
            name: "1073838679",
            flow_rate: "1000-1499",
            hydrant_location: "5 Harland View Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.08253586292267, 46.23674135436782],
          },
          properties: {
            name: "1073838680",
            flow_rate: "1000-1499",
            hydrant_location: "19 Harland View Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.080840706825256, 46.23665230321426],
          },
          properties: {
            name: "1073838681",
            flow_rate: "1000-1499",
            hydrant_location: "39 Harland View Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.098087310791016, 46.23284543496556],
          },
          properties: {
            name: "1073838682",
            flow_rate: "1000-1499",
            hydrant_location: "7 Horton Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.0995178626301, 46.232411681405154],
          },
          properties: {
            name: "1073838683",
            flow_rate: "1000-1499",
            hydrant_location: "9 Horton Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09857372505686, 46.232159349520934],
          },
          properties: {
            name: "1073838684",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09807277237009, 46.231048107387785],
          },
          properties: {
            name: "1073838685",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "29 Hopeton Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09927440200876, 46.23009812241966],
          },
          properties: {
            name: "1073838686",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "1 Hopeton Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09646344696115, 46.231923860214216],
          },
          properties: {
            name: "1073838687",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "69 Rankin Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.096845920654644, 46.23049280575342],
          },
          properties: {
            name: "1073838688",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "7 Holland Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09474306878697, 46.23124982091193],
          },
          properties: {
            name: "1073838689",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "81 Rankin Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.097811515900005, 46.22954281117396],
          },
          properties: {
            name: "1073838690",
            flow_rate: "1000-1499",
            hydrant_location: "19 Holland Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09603052911412, 46.22940921686752],
          },
          properties: {
            name: "1073838691",
            flow_rate: "1000-1499",
            hydrant_location: "7 Wren Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09383093109304, 46.23018989348418],
          },
          properties: {
            name: "1073838692",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "22 Wren Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09170662155324, 46.22938833221789],
          },
          properties: {
            name: "1073838693",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "34 Wren Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.0939781665802, 46.22894301534528],
          },
          properties: {
            name: "1073838694",
            flow_rate: "1000-1499",
            hydrant_location: "80 Heron Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.092368841171265, 46.22837894212011],
          },
          properties: {
            name: "1073838695",
            flow_rate: "1000-1499",
            hydrant_location: "90 Heron Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09021658055234, 46.22893274504041],
          },
          properties: {
            name: "1073838696",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "107 Heron Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.08805631641748, 46.229338842678395],
          },
          properties: {
            name: "1073838697",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "135 Heron Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.086125125926756, 46.2296950938964],
          },
          properties: {
            name: "1073838698",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "163 Heron Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.08576034550073, 46.23028884078809],
          },
          properties: {
            name: "1073838699",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "140 Squire Lane",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.08455871586206, 46.228181010250786],
          },
          properties: {
            name: "1073838700",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "100 Squire Lane",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.08578180317285, 46.22864117734518],
          },
          properties: {
            name: "1073838701",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "78 Ducks Landing",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.087670078319334, 46.22819585441081],
          },
          properties: {
            name: "1073838702",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "58 Ducks Landing",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.087831655295034, 46.22633893219474],
          },
          properties: {
            name: "1073838703",
            flow_rate: "1000-1499",
            hydrant_location: "234 Shakespeare Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.08875433519616, 46.225485357597606],
          },
          properties: {
            name: "1073838704",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.08707774145652, 46.22041813599716],
          },
          properties: {
            name: "1073838705",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.088880185914526, 46.221219828250725],
          },
          properties: {
            name: "1073838706",
            flow_rate: "1000-1499",
            hydrant_location: "23 Mackinnon Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.07792579455435, 46.21696633048244],
          },
          properties: {
            name: "1073838719",
            flow_rate: "1000-1499",
            hydrant_location: "4 Georgetown Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.0724561214447, 46.219997110512075],
          },
          properties: {
            name: "1073838720",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "31 Hollis Avenue",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.06921601295471, 46.22104376997866],
          },
          properties: {
            name: "1073838721",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "143 Hollis Avenue",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.068357706069946, 46.22016042039503],
          },
          properties: {
            name: "1073838722",
            flow_rate: "1000-1499",
            hydrant_location: "Autumn Lane",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.06599736213684, 46.219239940162524],
          },
          properties: {
            name: "1073838723",
            flow_rate: "1000-1499",
            hydrant_location: "",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.06678056716919, 46.21821551659942],
          },
          properties: {
            name: "1073838724",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.061519582029476, 46.21823558984411],
          },
          properties: {
            name: "1073839712",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "22 Macintosh Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.084118366241455, 46.21647840687709],
          },
          properties: {
            name: "1073840918",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "222 Stratford Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.08499813079834, 46.21779980303535],
          },
          properties: {
            name: "1073840919",
            flow_rate: "1000-1499",
            hydrant_location: "90 Clarey Way",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.083142042160034, 46.21765875664676],
          },
          properties: {
            name: "1073840920",
            flow_rate: "1000-1499",
            hydrant_location: "217 Stratford Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09037305070617, 46.219932962755394],
          },
          properties: {
            name: "1073840921",
            flow_rate: "1000-1499",
            hydrant_location: "34 Aintree Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.096079970383855, 46.21747543092645],
          },
          properties: {
            name: "1073841052",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "161 Stratford Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09796824553034, 46.21768328932976],
          },
          properties: {
            name: "1073841053",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "151 Stratford Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09914841749689, 46.21781691217358],
          },
          properties: {
            name: "1073841054",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "152 Stratford Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.10475819927256, 46.21904005037995],
          },
          properties: {
            name: "1073842269",
            flow_rate: "1000-1499",
            hydrant_location: "43 Glencove Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.105895455894874, 46.21728069608231],
          },
          properties: {
            name: "1073842270",
            flow_rate: "1000-1499",
            hydrant_location: "22 Glencove Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.10348146778147, 46.216382438606885],
          },
          properties: {
            name: "1073842271",
            flow_rate: "1000-1499",
            hydrant_location: "8 Glencove Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.10104602199595, 46.21751082579831],
          },
          properties: {
            name: "1073842272",
            flow_rate: "1000-1499",
            hydrant_location: "67 Glencove Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.101915057716774, 46.2168501282169],
          },
          properties: {
            name: "1073842274",
            flow_rate: "1000-1499",
            hydrant_location: "2 Glencove Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.098117049751686, 46.21685755182941],
          },
          properties: {
            name: "1073842276",
            flow_rate: "1000-1499",
            hydrant_location: "5 Mont Rose Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.10909300845577, 46.217381115628754],
          },
          properties: {
            name: "1073842974",
            flow_rate: "1000-1499",
            hydrant_location: "1 Carrington Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.11520297880529, 46.2191124607146],
          },
          properties: {
            name: "1073842975",
            flow_rate: "1000-1499",
            hydrant_location: "71 Brandy Lane",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.113147725466334, 46.21666990290307],
          },
          properties: {
            name: "1073842983",
            flow_rate: "1000-1499",
            hydrant_location: "14 Demshire Terrace",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.116569571204096, 46.21673526705114],
          },
          properties: {
            name: "1073842986",
            flow_rate: "1000-1499",
            hydrant_location: "9 Scantlebury Lane",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09276846587199, 46.22097013267259],
          },
          properties: {
            name: "1610707259",
            flow_rate: "1000-1499",
            hydrant_location: "79 Marion Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09557668454863, 46.22248579192814],
          },
          properties: {
            name: "1610707260",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "43 Marion Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09462181813933, 46.22319838100612],
          },
          properties: {
            name: "1610707261",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "61 Glen Stewart Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.0927351314333, 46.22245580385387],
          },
          properties: {
            name: "1610707262",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "63 Marion Drive West",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.08867299595913, 46.22085065539782],
          },
          properties: {
            name: "1610707263",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "23 Mackinnon Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.081227696020505, 46.21842626743604],
          },
          properties: {
            name: "1610707264",
            flow_rate: "1000-1499",
            hydrant_location: "133 Dale Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.067617416381836, 46.22240959345953],
          },
          properties: {
            name: "1610707265",
            flow_rate: "1000-1499",
            hydrant_location: "",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.06726626361723, 46.21873890029926],
          },
          properties: {
            name: "1610707266",
            flow_rate: ">= 1500 GPM",
            hydrant_location: "",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09363509871612, 46.23115442470962],
          },
          properties: {
            name: "1610708004",
            flow_rate: "1000-1499",
            hydrant_location: "95 Rankin Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.092240350028376, 46.23099856923023],
          },
          properties: {
            name: "1610708005",
            flow_rate: "1000-1499",
            hydrant_location: "26 Wren Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09017119743507, 46.229631154461295],
          },
          properties: {
            name: "1610708007",
            flow_rate: "1000-1499",
            hydrant_location: "107 Heron Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09065399505775, 46.230336229001495],
          },
          properties: {
            name: "1610708009",
            flow_rate: "1000-1499",
            hydrant_location: "34 Wren Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09104010910836, 46.23087453939642],
          },
          properties: {
            name: "1610708010",
            flow_rate: "1000-1499",
            hydrant_location: "34 Wren Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09145363838493, 46.231562683514426],
          },
          properties: {
            name: "1610708011",
            flow_rate: "1000-1499",
            hydrant_location: "",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09158238441764, 46.23230484087169],
          },
          properties: {
            name: "1610708012",
            flow_rate: "1000-1499",
            hydrant_location: "",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09215381712741, 46.23307997980782],
          },
          properties: {
            name: "1610708014",
            flow_rate: "1000-1499",
            hydrant_location: "74 Bunbury Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09067323775119, 46.23400764928926],
          },
          properties: {
            name: "1610708015",
            flow_rate: "1000-1499",
            hydrant_location: "84 Bunbury Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09022262663669, 46.23314677253439],
          },
          properties: {
            name: "1610708016",
            flow_rate: "1000-1499",
            hydrant_location: "84 Bunbury Road",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.08889963046949, 46.23346875213976],
          },
          properties: {
            name: "1610708017",
            flow_rate: "1000-1499",
            hydrant_location: "10 Swallow Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09008607582903, 46.218803215305286],
          },
          properties: {
            name: "1610708020",
            flow_rate: "UnknownWater",
            hydrant_location: "25 Aintree Drive",
          },
        },
        {
          type: "Feature",
          geometry: {
            type: "Point",
            coordinates: [-63.09245427631898, 46.2184977254386],
          },
          properties: {
            name: "1610708022",
            flow_rate: "UnknownDirection",
            hydrant_location: "112 Greensview Drive",
          },
        },
      ];
    </script>
    <style>
      #radarCanvas {
        border: 1px solid black;
      }
    </style>
    <style>
      
      #radarCanvas {
        border: 1px solid black;
      }
      #closestHydrants li {
        margin-bottom: 1rem;
      }
      @media screen and (max-width: 600px) {
        #closestHydrants h2 {
          font-size: 1em; /* Smaller font size for mobile devices */
        }
      }

    
    </style>
  </head>

  <body>
    <h1>Closest Hydrant</h1>
    <p>Your current location:</p>
    <p id="location"></p>
    <p>Closest Hydrant:</p>
    <p id="closestHydrants"></p>

    <canvas id="radarCanvas" width="400" height="400"></canvas>
    <script src="radar.js"></script>

   <script>
    const canvas = document.getElementById("radarCanvas");
    const ctx = canvas.getContext("2d");
    const userLocation = { x: canvas.width / 2, y: canvas.height / 2 };

    function latLonToRadarCoords(lat, lon, userLat, userLon) {
    // Adjust scale factor for mobile display. This value may need to be fine-tuned
    const scale = window.innerWidth < 600 ? 0.05 : 0.1; // Reduced for mobile

    const latDiff = (lat - userLat) * 111320; // Convert latitude difference to meters
    const lonDiff = (lon - userLon) * 111320 * Math.cos(userLat * Math.PI / 180);

    const x = lonDiff * scale;
    const y = latDiff * scale;

    // Debugging logs
    console.log(`User coordinates: (${userLat}, ${userLon})`);
    console.log(`Hydrant coordinates: (${lat}, ${lon})`);
    console.log(`Canvas coordinates: (${x}, ${y}), Scale: ${scale}`);

    return { x, y };
}

      // Function to calculate the distance between two coordinates
      function calculateDistance(lat1, lon1, lat2, lon2) {
        const R = 6371; // Earth's radius in kilometers
        const dLat = (lat2 - lat1) * (Math.PI / 180);
        const dLon = (lon2 - lon1) * (Math.PI / 180);
        const a =
          Math.sin(dLat / 2) * Math.sin(dLat / 2) +
          Math.cos(lat1 * (Math.PI / 180)) *
            Math.cos(lat2 * (Math.PI / 180)) *
            Math.sin(dLon / 2) *
            Math.sin(dLon / 2);
        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
        const distance = R * c; // Distance in kilometers
        return distance;
      }


      // Function to find the closest hydrant
      function findClosestHydrants(userLat, userLon, numberOfHydrants = 5) {
        let closestHydrants = [];

        for (const hydrant of hydrants) {
          const distance = calculateDistance(
            userLat,
            userLon,
            hydrant.geometry.coordinates[1],
            hydrant.geometry.coordinates[0]
          );
          hydrant.distance = distance; // Store the distance in the hydrant object for sorting
          closestHydrants.push(hydrant);
        }

        // Sort the hydrants by the calculated distance
        closestHydrants.sort((a, b) => a.distance - b.distance);

        // Return the top 'numberOfHydrants' hydrants
        console.log("setting Window variarble")
        window.closestHydrants  = closestHydrants.slice(0, numberOfHydrants)
        return closestHydrants.slice(0, numberOfHydrants);
      }

    function drawRadar(userLat, userLon, hydrants) {
      // Clear the canvas
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Draw user in the center
      ctx.fillStyle = "blue";
      ctx.beginPath();
      ctx.arc(userLocation.x, userLocation.y, 5, 0, 2 * Math.PI);
      ctx.fill();

      // Draw hydrants
      ctx.fillStyle = "black";
      hydrants.forEach(hydrant => {
        const { x, y } = latLonToRadarCoords(
          hydrant.geometry.coordinates[1],
          hydrant.geometry.coordinates[0],
          userLat,
          userLon
        );
        ctx.beginPath();
        ctx.arc(userLocation.x + x, userLocation.y - y, 5, 0, 2 * Math.PI); // Adjusted to translate lat/lon to canvas x/y
        ctx.fill();
      });

      // Draw concentric circles
      for (let i = 50; i <= 200; i += 50) {
        ctx.beginPath();
        ctx.arc(userLocation.x, userLocation.y, i, 0, 2 * Math.PI);
        ctx.stroke();
      }
    }

    function updateHydrantList(hydrants) {
      const closestHydrantsList = document.getElementById("closestHydrants");
      closestHydrantsList.innerHTML = ''; // Clear existing list

      hydrants.forEach(hydrant => {
        const listItem = document.createElement("li");
        listItem.innerHTML = `<p class="hyrdrantInfo" ">${hydrant.distance.toFixed(2)}km => ${hydrant.properties.hydrant_location} at ${hydrant.properties.flow_rate} </p>`;
        closestHydrantsList.appendChild(listItem);
      });
    }

    function getUserLocation() {
      if ("geolocation" in navigator) {
        navigator.geolocation.getCurrentPosition(function (position) {
          const userLat = position.coords.latitude;
          const userLon = position.coords.longitude;
          document.getElementById("location").textContent = `Latitude: ${userLat}, Longitude: ${userLon}`;

          const closestHydrants = findClosestHydrants(userLat, userLon);
          updateHydrantList(closestHydrants);
          drawRadar(userLat, userLon, closestHydrants);
        });
      } else {
        document.getElementById("location").textContent = "Geolocation is not supported by your browser.";
      }
    }

    getUserLocation();
  </script>
</body>
</html>
